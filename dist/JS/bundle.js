function validInput(e,t,r,n){e.addEventListener("input",()=>{e.value===t?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[0],e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function validEmail(e,t,r){e.addEventListener("input",()=>{-1===e.value.indexOf("@")?(console.log(e.parentElement.parentElement),e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[1],e.parentElement.classList.add("form__input-invalid"),t.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function passValid(e,t,r,n){t.addEventListener("input",()=>{console.log(t.value+" "+e.value),""===t.value?(t.parentElement.parentElement.querySelector(".form__error").style.display="block",t.parentElement.parentElement.querySelector(".form__error").textContent=n[0],t.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):e.value!==t.value||t.value!==e.value?(t.parentElement.parentElement.querySelector(".form__error").style.display="block",t.parentElement.parentElement.querySelector(".form__error").textContent=n[3],t.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"),t.parentElement.parentElement.querySelector(".form__error").style.display="none",t.parentElement.classList.remove("form__input-invalid"))}),e.addEventListener("input",()=>{console.log(t.value+" "+e.value),""===e.value?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[0],e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):t.value!==e.value||e.value!==t.value?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[3],e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"),t.parentElement.parentElement.querySelector(".form__error").style.display="none",t.parentElement.classList.remove("form__input-invalid"))})}function validPhone(e,t,r,n){e.addEventListener("input",()=>{e.value===t?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[1],e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):-1===e.value.search(/[0-9]/)?e.parentElement.parentElement.querySelector(".form__error").textContent=n[4]:(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function validCheckbox(e,t,r){e.addEventListener("input",()=>{e.checked===t?(e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):e.parentElement.classList.remove("form__input-invalid")})}document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".header__burger");var e=document.querySelectorAll(".header__menu-item");const r=document.querySelector(".header__menu"),n=document.querySelector(".cookies-alert");var l=document.querySelector(".cookies-alert__btn");let a=["Поле не заполнено","ВВЕДИТЕ ВАШ E-MAIL В ПРАВИЛЬНОМ ФОРМАТЕ.","Некорректный ИИН","Пароли должны совпадать","Некорректное значение"];if(document.querySelector(".access__form")){var o=document.querySelector(".access__form"),i=o.querySelectorAll("input");const s=o.querySelector("[name='companyName']"),m=o.querySelector("[name='iin']"),d=o.querySelector("[name='email']"),c=o.querySelector("[name='phone']"),p=o.querySelector("[name='password']"),u=o.querySelector("[name='confirmPassword']"),_=o.querySelector("[name='agreeOfert']"),E=o.querySelector('[name="agreePersonal"]'),y=o.querySelector("[type='submit']");y.classList.add("disabled"),validInput(s,"",y,a),validPhone(m,"",y,a),validEmail(d,y,a),validPhone(c,"",y,a),passValid(p,u,y,a),validInput(u,"",y,a),validCheckbox(_,!1,y),validCheckbox(E,!1,y),i.forEach(e=>{e.addEventListener("input",()=>{""===s.value||""===m.value||-1===m.value.search(/[0-9]/)||-1===d.value.indexOf("@")||""===c.value||""===p.value||""===u.value||!1===_.checked||!1===E.checked?y.classList.add("disabled"):(console.log("succes"),y.classList.remove("disabled"))})}),y.addEventListener("click",()=>{""===s.value&&(s.parentElement.classList.add("form__input-invalid"),s.parentElement.parentElement.querySelector(".form__error").style.display="block",s.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===m.value&&(m.parentElement.classList.add("form__input-invalid"),m.parentElement.parentElement.querySelector(".form__error").style.display="block",m.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),-1===d.value.indexOf("@")&&(d.parentElement.classList.add("form__input-invalid"),d.parentElement.parentElement.querySelector(".form__error").style.display="block",d.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===c.value&&(c.parentElement.classList.add("form__input-invalid"),c.parentElement.parentElement.querySelector(".form__error").style.display="block",c.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===p.value&&(p.parentElement.classList.add("form__input-invalid"),p.parentElement.parentElement.querySelector(".form__error").style.display="block",p.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===u.value&&(u.parentElement.classList.add("form__input-invalid"),u.parentElement.parentElement.querySelector(".form__error").style.display="block",u.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),!1===_.checked&&_.parentElement.classList.add("form__input-invalid"),!1===E.checked&&E.parentElement.classList.add("form__input-invalid")})}if(document.querySelector(".questions__form")){o=document.querySelector(".questions__form"),i=o.querySelectorAll("input");const v=o.querySelector("[name='companyName']"),f=o.querySelector("[name='email']"),q=o.querySelector('[name="agreePersonal"]'),S=o.querySelector('[name="message"]'),L=o.querySelector("[type='submit']");validInput(v,"",L,a),validEmail(f,L,a),validInput(S,"",L,a),validCheckbox(q,!1,L),i.forEach(e=>{e.addEventListener("input",()=>{""===v.value||-1===f.value.indexOf("@")||!1===q.checked||""===S.value?L.classList.add("disabled"):L.classList.remove("disabled")})}),L.classList.add("disabled"),L.addEventListener("click",()=>{""===v.value&&(v.parentElement.classList.add("form__input-invalid"),v.parentElement.parentElement.querySelector(".form__error").style.display="block",v.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===f.value?(f.parentElement.classList.add("form__input-invalid"),f.parentElement.parentElement.querySelector(".form__error").style.display="block",f.parentElement.parentElement.querySelector(".form__error").textContent=a[0]):-1===f.value.indexOf("@")&&(f.parentElement.classList.add("form__input-invalid"),f.parentElement.parentElement.querySelector(".form__error").style.display="block",f.parentElement.parentElement.querySelector(".form__error").textContent=a[1]),!1===q.checked&&q.parentElement.classList.add("form__input-invalid"),""===S.value&&(S.parentElement.classList.add("form__input-invalid"),S.parentElement.parentElement.querySelector(".form__error").style.display="block",S.parentElement.parentElement.querySelector(".form__error").textContent=a[0])})}if(t.addEventListener("click",()=>{t.classList.toggle("active"),r.classList.toggle("active")}),e.forEach(e=>{e.addEventListener("click",()=>{t.classList.toggle("active"),r.classList.toggle("active")})}),document.cookie.indexOf("cookieOn")<0&&n.classList.add("active"),l.addEventListener("click",()=>{n.classList.remove("active"),document.cookie="cookieOn=true"}),document.querySelector(".recovery")){o=document.querySelector(".recovery");const b=o.querySelector("[type='email']"),k=o.querySelector("[name='agreePersonal']"),x=o.querySelector("[type='submit'");x.classList.add("disabled"),validEmail(b,x,a),validCheckbox(k,x,a),o.querySelectorAll("input").forEach(e=>{e.addEventListener("input",()=>{-1===b.value.indexOf("@")||!1===k.checked?(b.parentElement.classList.add("form__input-invalid"),x.classList.add("disabled")):x.classList.remove("disabled")})}),o.addEventListener("submit",e=>{e.preventDefault(),b.value.indexOf("@")<=0?(b.parentElement.classList.add("form__input-invalid"),b.parentElement.parentElement.querySelector(".form__error").style.display="block",b.parentElement.parentElement.querySelector(".form__error").textContent=a[1]):b.parentElement.classList.remove("form__input-invalid"),!1===k.checked?k.parentElement.classList.add("form__input-invalid"):b.parentElement.classList.remove("form__input-invalid")})}if(document.querySelector(".questions__form")&&document.querySelector(".questions__form-clear").addEventListener("click",()=>{document.querySelector(".questions__form").reset()}),document.querySelector(".login__form")){i=document.querySelector(".login__form"),e=i.querySelectorAll("input[required]");const h=i.querySelector("[name='email']"),C=i.querySelector("[name='password']"),g=i.querySelector("[name='agreePersonal']"),O=i.querySelector("[type='submit']");validEmail(h,O,a),validInput(C,"",O,a),validCheckbox(g,O,a),O.classList.add("disabled"),e.forEach(e=>{e.addEventListener("click",()=>{""===C.value||h.parentElement.classList.contains("form__input-invalid")||!1===g.value?O.classList.add("disabled"):O.classList.remove("disabled")})}),O.addEventListener("click",()=>{""===C.value&&(C.parentElement.classList.add("form__input-invalid"),C.parentElement.parentElement.querySelector(".form__error").style.display="block",C.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===h.value?(h.parentElement.classList.add("form__input-invalid"),h.parentElement.parentElement.querySelector(".form__error").style.display="block",h.parentElement.parentElement.querySelector(".form__error").textContent=a[0]):!1===h.value.indexOf("@")&&(h.parentElement.classList.add("form__input-invalid"),h.parentElement.parentElement.querySelector(".form__error").style.display="block",h.parentElement.parentElement.querySelector(".form__error").textContent=a[1]),!1===g.checked&&(g.parentElement.classList.add("form__input-invalid"),g.parentElement.parentElement.querySelector(".form__error").style.display="block",g.parentElement.parentElement.querySelector(".form__error").textContent=a[1])})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInZhbGlkSW5wdXQiLCJpbnB1dCIsInJlcyIsInNlbGVjdG9yIiwiZXJyb3JzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwicGFyZW50RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZhbGlkRW1haWwiLCJpbmRleE9mIiwiY29uc29sZSIsImxvZyIsInBhc3NWYWxpZCIsImlucHV0Q29uZiIsInZhbGlkUGhvbmUiLCJzZWFyY2giLCJ2YWxpZENoZWNrYm94IiwiY2hlY2tlZCIsImRvY3VtZW50IiwiYnVyZ2VyIiwibWVudUl0ZW0iLCJxdWVyeVNlbGVjdG9yQWxsIiwibWVudSIsImNvb2tpZXNBbGVydCIsImNvb2tpZXNBbGVydENsb3NlIiwibGV0IiwiYWNjZXNGb3JtIiwiaW5wdXRBbGwiLCJpbnB1dE5hbWUiLCJpbnB1dElpbiIsImlucHV0RW1haWwiLCJpbnB1dFBob25lIiwiaW5wdXRQYXNzIiwiaW5wdXRDb25maXJtUGFzcyIsImlucHV0T2ZlcnQiLCJpbnB1dFBlcnNvbmFsIiwiYnRuIiwiZm9yRWFjaCIsImVsIiwicUZvcm0iLCJpbnB1dHNBbGwiLCJpbnB1dEVtYWxpIiwiaW5wdXRNZXNzYWdlIiwidG9nZ2xlIiwiY29va2llIiwiZm9ybVJlY292ZXJ5IiwiZm9ybVJlY292ZXJ5RW1haWwiLCJmb3JtUmVjb3ZlcnlBZ3JlZSIsImZvcm1SZWNvdmVyeUJ0biIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwibG9naW4iLCJsb2dpbkFsbCIsImxvZ2luRW1haWwiLCJsb2dpblBhc3MiLCJsb2dpblBlcnNvbmFsIiwiY29udGFpbnMiXSwibWFwcGluZ3MiOiJBQUFBLFNBQUFBLFdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FILEVBQUFJLGlCQUFBLFFBQUEsS0FDQUosRUFBQUssUUFBQUosR0FDQUQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJQUFBLFVBQUEsSUFFQVosRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsT0FDQVQsRUFBQU0sY0FBQUssVUFBQUUsT0FBQSxxQkFBQSxFQUVBLENBQUEsQ0FDQSxDQUVBLFNBQUFDLFdBQUFkLEVBQUFFLEVBQUFDLEdBQ0FILEVBQUFJLGlCQUFBLFFBQUEsS0FDQSxDQUFBLElBQUFKLEVBQUFLLE1BQUFVLFFBQUEsR0FBQSxHQUNBQyxRQUFBQyxJQUFBakIsRUFBQU0sY0FBQUEsYUFBQSxFQUNBTixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBSCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBRUEsQ0FBQSxDQUNBLENBRUEsU0FBQUssVUFBQWxCLEVBQUFtQixFQUFBakIsRUFBQUMsR0FDQWdCLEVBQUFmLGlCQUFBLFFBQUEsS0FDQVksUUFBQUMsSUFBQUUsRUFBQWQsTUFBQSxJQUFBTCxFQUFBSyxLQUFBLEVBQ0EsS0FBQWMsRUFBQWQsT0FDQWMsRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVUsRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQWdCLEVBQUFiLGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQVYsRUFBQVMsVUFBQUMsSUFBQSxVQUFBLEdBQ0FaLEVBQUFLLFFBQUFjLEVBQUFkLE9BQUFjLEVBQUFkLFFBQUFMLEVBQUFLLE9BQ0FjLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0FVLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLEdBQ0FnQixFQUFBYixjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBQ0FNLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLE9BQ0FVLEVBQUFiLGNBQUFLLFVBQUFFLE9BQUEscUJBQUEsRUFFQSxDQUFBLEVBQ0FiLEVBQUFJLGlCQUFBLFFBQUEsS0FDQVksUUFBQUMsSUFBQUUsRUFBQWQsTUFBQSxJQUFBTCxFQUFBSyxLQUFBLEVBQ0EsS0FBQUwsRUFBQUssT0FDQUwsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJQUFBLFVBQUEsR0FDQU8sRUFBQWQsUUFBQUwsRUFBQUssT0FBQUwsRUFBQUssUUFBQWMsRUFBQWQsT0FDQUwsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJ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cUJBQUEsRUFDQWtELEVBQUF4RCxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBcUQsRUFBQXhELGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLEdBRUEsQ0FBQSxDQUNBLENBSUEsQ0FBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB2YWxpZElucHV0IChpbnB1dCwgcmVzLCBzZWxlY3RvciwgZXJyb3JzKSB7XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gcmVzKSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRFbWFpbChpbnB1dCwgc2VsZWN0b3IsIGVycm9ycykge1xyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaW5wdXQudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudClcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzFdO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYXNzVmFsaWQgKGlucHV0LCBpbnB1dENvbmYsIHNlbGVjdG9yLCBlcnJvcnMpIHtcclxuICAgIGlucHV0Q29uZi5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlucHV0Q29uZi52YWx1ZSArICcgJyArIGlucHV0LnZhbHVlKTtcclxuICAgICAgICBpZiAoaW5wdXRDb25mLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnZhbHVlICE9PSBpbnB1dENvbmYudmFsdWUgfHwgaW5wdXRDb25mLnZhbHVlICE9PSBpbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1szXTtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coaW5wdXRDb25mLnZhbHVlICsgJyAnICsgaW5wdXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dENvbmYudmFsdWUgIT09IGlucHV0LnZhbHVlIHx8IGlucHV0LnZhbHVlICE9PSBpbnB1dENvbmYudmFsdWUpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzNdO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkUGhvbmUoaW5wdXQsIHJlcywgc2VsZWN0b3IsIGVycm9ycykge1xyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09IHJlcykge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMV07XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnZhbHVlLnNlYXJjaCgvWzAtOV0vKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbNF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRDaGVja2JveChpbnB1dCwgcmVzLCBzZWxlY3Rvcikge1xyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCA9PT0gcmVzKSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2J1cmdlclwiKTtcclxuICAgIGNvbnN0IG1lbnVJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXJfX21lbnUtaXRlbVwiKTtcclxuICAgIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbWVudVwiKTtcclxuICAgIGNvbnN0IGNvb2tpZXNBbGVydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llcy1hbGVydFwiKTtcclxuICAgIGNvbnN0IGNvb2tpZXNBbGVydENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWVzLWFsZXJ0X19idG5cIik7XHJcbiAgICBsZXQgZXJyb3JzID0gWyfQn9C+0LvQtSDQvdC1INC30LDQv9C+0LvQvdC10L3QvicsIFwi0JLQktCV0JTQmNCi0JUg0JLQkNCoIEUtTUFJTCDQkiDQn9Cg0JDQktCY0JvQrNCd0J7QnCDQpNCe0KDQnNCQ0KLQlS5cIiwgXCLQndC10LrQvtGA0YDQtdC60YLQvdGL0Lkg0JjQmNCdXCIsIFwi0J/QsNGA0L7Qu9C4INC00L7Qu9C20L3RiyDRgdC+0LLQv9Cw0LTQsNGC0YxcIiwgXCLQndC10LrQvtGA0YDQtdC60YLQvdC+0LUg0LfQvdCw0YfQtdC90LjQtVwiXTtcclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2Nlc3NfX2Zvcm1cIikpIHtcclxuICAgICAgICBjb25zdCBhY2Nlc0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY2Vzc19fZm9ybVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dEFsbCA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIilcclxuICAgICAgICBjb25zdCBpbnB1dE5hbWUgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdjb21wYW55TmFtZSddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0SWluID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0naWluJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRFbWFpbCA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2VtYWlsJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRQaG9uZSA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3Bob25lJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRQYXNzID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dENvbmZpcm1QYXNzID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nY29uZmlybVBhc3N3b3JkJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRPZmVydCA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2FncmVlT2ZlcnQnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dFBlcnNvbmFsID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiYWdyZWVQZXJzb25hbFwiXScpO1xyXG4gICAgICAgIGNvbnN0IGJ0biA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9J3N1Ym1pdCddXCIpO1xyXG5cclxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG5cclxuICAgICAgICB2YWxpZElucHV0KGlucHV0TmFtZSwgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZFBob25lKGlucHV0SWluLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkRW1haWwoaW5wdXRFbWFpbCwgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkUGhvbmUoaW5wdXRQaG9uZSwgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICBwYXNzVmFsaWQoaW5wdXRQYXNzLCBpbnB1dENvbmZpcm1QYXNzLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRJbnB1dChpbnB1dENvbmZpcm1QYXNzLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkQ2hlY2tib3goaW5wdXRPZmVydCwgZmFsc2UsIGJ0bik7XHJcbiAgICAgICAgdmFsaWRDaGVja2JveChpbnB1dFBlcnNvbmFsLCBmYWxzZSwgYnRuKTtcclxuXHJcbiAgICAgICAgaW5wdXRBbGwuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dE5hbWUudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dElpbi52YWx1ZSA9PT0gJycgfHwgaW5wdXRJaW4udmFsdWUuc2VhcmNoKC9bMC05XS8pID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSAgaWYgKGlucHV0RW1haWwudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dFBob25lLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRQYXNzLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSAgaWYgKGlucHV0Q29uZmlybVBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlICBpZiAoaW5wdXRPZmVydC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRQZXJzb25hbC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2VzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXROYW1lLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0SWluLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRJaW4ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0SWluLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRJaW4ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0RW1haWwudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRQaG9uZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0UGhvbmUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0UGhvbmUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBob25lLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBhc3MucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0UGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0UGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgaWYgKGlucHV0Q29uZmlybVBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dENvbmZpcm1QYXNzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dENvbmZpcm1QYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRDb25maXJtUGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgaWYgKGlucHV0T2ZlcnQuY2hlY2tlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0T2ZlcnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRQZXJzb25hbC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQZXJzb25hbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2Zvcm1cIikpIHtcclxuICAgICAgICBjb25zdCBxRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucXVlc3Rpb25zX19mb3JtXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0c0FsbCA9IHFGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dE5hbWUgPSBxRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2NvbXBhbnlOYW1lJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRFbWFsaSA9IHFGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nZW1haWwnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dFBlcnNvbmFsID0gcUZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCJhZ3JlZVBlcnNvbmFsXCJdJyk7XHJcbiAgICAgICAgY29uc3QgaW5wdXRNZXNzYWdlID0gcUZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCJtZXNzYWdlXCJdJyk7XHJcbiAgICAgICAgY29uc3QgYnRuID0gcUZvcm0ucXVlcnlTZWxlY3RvcihcIlt0eXBlPSdzdWJtaXQnXVwiKTtcclxuXHJcbiAgICAgICAgdmFsaWRJbnB1dChpbnB1dE5hbWUsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRFbWFpbChpbnB1dEVtYWxpLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRJbnB1dChpbnB1dE1lc3NhZ2UsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRDaGVja2JveChpbnB1dFBlcnNvbmFsLCBmYWxzZSwgYnRuKTtcclxuXHJcbiAgICAgICAgaW5wdXRzQWxsLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0TmFtZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dEVtYWxpLnZhbHVlLmluZGV4T2YoXCJAXCIpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0UGVyc29uYWwuY2hlY2tlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dE1lc3NhZ2UudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG5cclxuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlucHV0TmFtZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0TmFtZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dEVtYWxpLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1hbGkucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRFbWFsaS52YWx1ZS5pbmRleE9mKFwiQFwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1hbGkucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1hbGkucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFBlcnNvbmFsLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBlcnNvbmFsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0TWVzc2FnZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0TWVzc2FnZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRNZXNzYWdlLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRNZXNzYWdlLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbWVudUl0ZW0uZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoZG9jdW1lbnQuY29va2llLmluZGV4T2YoXCJjb29raWVPblwiKSA8IDApIHtcclxuICAgICAgICBjb29raWVzQWxlcnQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb29raWVzQWxlcnRDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNvb2tpZXNBbGVydC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiY29va2llT249dHJ1ZVwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVjb3ZlcnlcIikpIHtcclxuICAgICAgICBjb25zdCBmb3JtUmVjb3ZlcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlY292ZXJ5XCIpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1SZWNvdmVyeUVtYWlsID0gZm9ybVJlY292ZXJ5LnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT0nZW1haWwnXVwiKTtcclxuICAgICAgICBjb25zdCBmb3JtUmVjb3ZlcnlBZ3JlZSA9IGZvcm1SZWNvdmVyeS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2FncmVlUGVyc29uYWwnXVwiKTtcclxuICAgICAgICBjb25zdCBmb3JtUmVjb3ZlcnlCdG4gPSBmb3JtUmVjb3ZlcnkucXVlcnlTZWxlY3RvcihcIlt0eXBlPSdzdWJtaXQnXCIpO1xyXG5cclxuICAgICAgICBmb3JtUmVjb3ZlcnlCdG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG5cclxuXHJcbiAgICAgICAgdmFsaWRFbWFpbChmb3JtUmVjb3ZlcnlFbWFpbCwgZm9ybVJlY292ZXJ5QnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkQ2hlY2tib3goZm9ybVJlY292ZXJ5QWdyZWUsIGZvcm1SZWNvdmVyeUJ0biwgZXJyb3JzKTtcclxuXHJcbiAgICAgICAgZm9ybVJlY292ZXJ5LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKS5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChmb3JtUmVjb3ZlcnlFbWFpbC52YWx1ZS5pbmRleE9mKFwiQFwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlFbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoZm9ybVJlY292ZXJ5QWdyZWUuY2hlY2tlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlFbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICBmb3JtUmVjb3ZlcnkuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmIChmb3JtUmVjb3ZlcnlFbWFpbC52YWx1ZS5pbmRleE9mKFwiQFwiKSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlFbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlFbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1sxXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZm9ybVJlY292ZXJ5QWdyZWUuY2hlY2tlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUFncmVlLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2Zvcm1cIikpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnF1ZXN0aW9uc19fZm9ybS1jbGVhclwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnF1ZXN0aW9uc19fZm9ybVwiKS5yZXNldCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9naW5fX2Zvcm1cIikpIHtcclxuICAgICAgICBjb25zdCBsb2dpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9naW5fX2Zvcm1cIik7XHJcbiAgICAgICAgY29uc3QgbG9naW5BbGwgPSBsb2dpbi5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbcmVxdWlyZWRdXCIpO1xyXG4gICAgICAgIGNvbnN0IGxvZ2luRW1haWwgPSBsb2dpbi5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2VtYWlsJ11cIik7XHJcbiAgICAgICAgY29uc3QgbG9naW5QYXNzID0gbG9naW4ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdwYXNzd29yZCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGxvZ2luUGVyc29uYWwgPSBsb2dpbi5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2FncmVlUGVyc29uYWwnXVwiKTtcclxuICAgICAgICBjb25zdCBidG4gPSBsb2dpbi5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9J3N1Ym1pdCddXCIpO1xyXG5cclxuICAgICAgICB2YWxpZEVtYWlsKGxvZ2luRW1haWwsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZElucHV0KGxvZ2luUGFzcywgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZENoZWNrYm94KGxvZ2luUGVyc29uYWwsIGJ0biwgZXJyb3JzKTtcclxuXHJcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuXHJcbiAgICAgICAgbG9naW5BbGwuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9naW5QYXNzLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobG9naW5QZXJzb25hbC52YWx1ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobG9naW5QYXNzLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgbG9naW5QYXNzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBsb2dpblBhc3MucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBsb2dpblBhc3MucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxvZ2luRW1haWwudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgbG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsb2dpbkVtYWlsLnZhbHVlLmluZGV4T2YoXCJAXCIpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgbG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMV07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGxvZ2luUGVyc29uYWwuY2hlY2tlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luUGVyc29uYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGxvZ2luUGVyc29uYWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBsb2dpblBlcnNvbmFsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcblxyXG5cclxufSk7Il19
