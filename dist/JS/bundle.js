function validInput(e,t,r,n){e.addEventListener("input",()=>{e.value===t?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[0],e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function validEmail(e,t,r){e.addEventListener("input",()=>{-1===e.value.indexOf("@")?(console.log(e.parentElement.parentElement),e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[1],e.parentElement.classList.add("form__input-invalid"),t.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function passValid(e,t,r,n){t.addEventListener("input",()=>{console.log(t.value+" "+e.value),""===t.value?(t.parentElement.parentElement.querySelector(".form__error").style.display="block",t.parentElement.parentElement.querySelector(".form__error").textContent=n[0],t.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):e.value!==t.value||t.value!==e.value?(t.parentElement.parentElement.querySelector(".form__error").style.display="block",t.parentElement.parentElement.querySelector(".form__error").textContent=n[3],t.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"),t.parentElement.parentElement.querySelector(".form__error").style.display="none",t.parentElement.classList.remove("form__input-invalid"))}),e.addEventListener("input",()=>{console.log(t.value+" "+e.value),""===e.value?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[0],e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):t.value!==e.value||e.value!==t.value?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[3],e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"),t.parentElement.parentElement.querySelector(".form__error").style.display="none",t.parentElement.classList.remove("form__input-invalid"))})}function validPhone(e,t,r,n){e.addEventListener("input",()=>{e.value===t?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[1],e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):-1===e.value.search(/[0-9]/)?e.parentElement.parentElement.querySelector(".form__error").textContent=n[4]:(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function validCheckbox(e,t,r){e.addEventListener("input",()=>{e.checked===t?(e.parentElement.classList.add("form__input-invalid"),r.classList.add("disabled")):e.parentElement.classList.remove("form__input-invalid")})}document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".header__burger");var e=document.querySelectorAll(".header__menu-item");const r=document.querySelector(".header__menu"),n=document.querySelector(".cookies-alert");var l=document.querySelector(".cookies-alert__btn");let a=["Поле не заполнено","ВВЕДИТЕ ВАШ E-MAIL В ПРАВИЛЬНОМ ФОРМАТЕ.","Некорректный ИИН","Пароли должны совпадать","Некорректное значение"];if(document.querySelector(".access__form")){var o=document.querySelector(".access__form"),i=o.querySelectorAll("input");const s=o.querySelector("[name='companyName']"),m=o.querySelector("[name='iin']"),d=o.querySelector("[name='email']"),c=o.querySelector("[name='phone']"),p=o.querySelector("[name='password']"),u=o.querySelector("[name='confirmPassword']"),_=o.querySelector("[name='agreeOfert']"),E=o.querySelector('[name="agreePersonal"]'),y=o.querySelector("[type='submit']");y.classList.add("disabled"),validInput(s,"",y,a),validPhone(m,"",y,a),validEmail(d,y,a),validPhone(c,"",y,a),passValid(p,u,y,a),validInput(u,"",y,a),validCheckbox(_,!1,y),validCheckbox(E,!1,y),i.forEach(e=>{e.addEventListener("input",()=>{""===s.value||""===m.value||-1===m.value.search(/[0-9]/)||-1===d.value.indexOf("@")||""===c.value||""===p.value||""===u.value||!1===_.checked||!1===E.checked?y.classList.add("disabled"):(console.log("succes"),y.classList.remove("disabled"))})}),y.addEventListener("click",()=>{""===s.value&&(s.parentElement.classList.add("form__input-invalid"),s.parentElement.parentElement.querySelector(".form__error").style.display="block",s.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===m.value&&(m.parentElement.classList.add("form__input-invalid"),m.parentElement.parentElement.querySelector(".form__error").style.display="block",m.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),-1===d.value.indexOf("@")&&(d.parentElement.classList.add("form__input-invalid"),d.parentElement.parentElement.querySelector(".form__error").style.display="block",d.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===c.value&&(c.parentElement.classList.add("form__input-invalid"),c.parentElement.parentElement.querySelector(".form__error").style.display="block",c.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===p.value&&(p.parentElement.classList.add("form__input-invalid"),p.parentElement.parentElement.querySelector(".form__error").style.display="block",p.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===u.value&&(u.parentElement.classList.add("form__input-invalid"),u.parentElement.parentElement.querySelector(".form__error").style.display="block",u.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),!1===_.checked&&_.parentElement.classList.add("form__input-invalid"),!1===E.checked&&E.parentElement.classList.add("form__input-invalid")})}if(document.querySelector(".questions__form")){o=document.querySelector(".questions__form"),i=o.querySelectorAll("input");const v=o.querySelector("[name='companyName']"),f=o.querySelector("[name='email']"),q=o.querySelector('[name="agreePersonal"]'),S=o.querySelector('[name="message"]'),L=o.querySelector("[type='submit']");validInput(v,"",L,a),validEmail(f,L,a),validInput(S,"",L,a),validCheckbox(q,!1,L),i.forEach(e=>{e.addEventListener("input",()=>{""===v.value||-1===f.value.indexOf("@")||!1===q.checked||""===S.value?L.classList.add("disabled"):L.classList.remove("disabled")})}),L.classList.add("disabled"),L.addEventListener("click",()=>{""===v.value&&(v.parentElement.classList.add("form__input-invalid"),v.parentElement.parentElement.querySelector(".form__error").style.display="block",v.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===f.value?(f.parentElement.classList.add("form__input-invalid"),f.parentElement.parentElement.querySelector(".form__error").style.display="block",f.parentElement.parentElement.querySelector(".form__error").textContent=a[0]):f.value.indexOf("@")&&(f.parentElement.classList.add("form__input-invalid"),f.parentElement.parentElement.querySelector(".form__error").style.display="block",f.parentElement.parentElement.querySelector(".form__error").textContent=a[1]),!1===q.checked&&q.parentElement.classList.add("form__input-invalid"),""===S.value&&(S.parentElement.classList.add("form__input-invalid"),S.parentElement.parentElement.querySelector(".form__error").style.display="block",S.parentElement.parentElement.querySelector(".form__error").textContent=a[0])})}if(t.addEventListener("click",()=>{t.classList.toggle("active"),r.classList.toggle("active")}),e.forEach(e=>{e.addEventListener("click",()=>{t.classList.toggle("active"),r.classList.toggle("active")})}),document.cookie.indexOf("cookieOn")<0&&n.classList.add("active"),l.addEventListener("click",()=>{n.classList.remove("active"),document.cookie="cookieOn=true"}),document.querySelector(".recovery")){o=document.querySelector(".recovery");const b=o.querySelector("[type='email']"),k=o.querySelector("[name='agreePersonal']"),x=o.querySelector("[type='submit'");x.classList.add("disabled"),validEmail(b,x,a),validCheckbox(k,x,a),o.querySelectorAll("input").forEach(e=>{e.addEventListener("input",()=>{-1===b.value.indexOf("@")||!1===k.checked?(b.parentElement.classList.add("form__input-invalid"),x.classList.add("disabled")):x.classList.remove("disabled")})}),o.addEventListener("submit",e=>{e.preventDefault(),b.value.indexOf("@")<=0?(b.parentElement.classList.add("form__input-invalid"),b.parentElement.parentElement.querySelector(".form__error").style.display="block",b.parentElement.parentElement.querySelector(".form__error").textContent=a[1]):b.parentElement.classList.remove("form__input-invalid"),!1===k.checked?k.parentElement.classList.add("form__input-invalid"):b.parentElement.classList.remove("form__input-invalid")})}if(document.querySelector(".questions__form")&&document.querySelector(".questions__form-clear").addEventListener("click",()=>{document.querySelector(".questions__form").reset()}),document.querySelector(".login__form")){i=document.querySelector(".login__form"),e=i.querySelectorAll("input[required]");const h=i.querySelector("[name='email']"),C=i.querySelector("[name='password']"),g=i.querySelector("[name='agreePersonal']"),O=i.querySelector("[type='submit']");validEmail(h,O,a),validInput(C,"",O,a),validCheckbox(g,O,a),O.classList.add("disabled"),e.forEach(e=>{e.addEventListener("click",()=>{""===C.value||h.parentElement.classList.contains("form__input-invalid")||!1===g.value?O.classList.add("disabled"):O.classList.remove("disabled")})}),O.addEventListener("click",()=>{""===C.value&&(C.parentElement.classList.add("form__input-invalid"),C.parentElement.parentElement.querySelector(".form__error").style.display="block",C.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===h.value?(h.parentElement.classList.add("form__input-invalid"),h.parentElement.parentElement.querySelector(".form__error").style.display="block",h.parentElement.parentElement.querySelector(".form__error").textContent=a[0]):!1===h.value.indexOf("@")&&(h.parentElement.classList.add("form__input-invalid"),h.parentElement.parentElement.querySelector(".form__error").style.display="block",h.parentElement.parentElement.querySelector(".form__error").textContent=a[1]),!1===g.checked&&(g.parentElement.classList.add("form__input-invalid"),g.parentElement.parentElement.querySelector(".form__error").style.display="block",g.parentElement.parentElement.querySelector(".form__error").textContent=a[1])})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInZhbGlkSW5wdXQiLCJpbnB1dCIsInJlcyIsInNlbGVjdG9yIiwiZXJyb3JzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwicGFyZW50RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZhbGlkRW1haWwiLCJpbmRleE9mIiwiY29uc29sZSIsImxvZyIsInBhc3NWYWxpZCIsImlucHV0Q29uZiIsInZhbGlkUGhvbmUiLCJzZWFyY2giLCJ2YWxpZENoZWNrYm94IiwiY2hlY2tlZCIsImRvY3VtZW50IiwiYnVyZ2VyIiwibWVudUl0ZW0iLCJxdWVyeVNlbGVjdG9yQWxsIiwibWVudSIsImNvb2tpZXNBbGVydCIsImNvb2tpZXNBbGVydENsb3NlIiwibGV0IiwiYWNjZXNGb3JtIiwiaW5wdXRBbGwiLCJpbnB1dE5hbWUiLCJpbnB1dElpbiIsImlucHV0RW1haWwiLCJpbnB1dFBob25lIiwiaW5wdXRQYXNzIiwiaW5wdXRDb25maXJtUGFzcyIsImlucHV0T2ZlcnQiLCJpbnB1dFBlcnNvbmFsIiwiYnRuIiwiZm9yRWFjaCIsImVsIiwicUZvcm0iLCJpbnB1dHNBbGwiLCJpbnB1dEVtYWxpIiwiaW5wdXRNZXNzYWdlIiwidG9nZ2xlIiwiY29va2llIiwiZm9ybVJlY292ZXJ5IiwiZm9ybVJlY292ZXJ5RW1haWwiLCJmb3JtUmVjb3ZlcnlBZ3JlZSIsImZvcm1SZWNvdmVyeUJ0biIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwibG9naW4iLCJsb2dpbkFsbCIsImxvZ2luRW1haWwiLCJsb2dpblBhc3MiLCJsb2dpblBlcnNvbmFsIiwiY29udGFpbnMiXSwibWFwcGluZ3MiOiJBQUFBLFNBQUFBLFdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FILEVBQUFJLGlCQUFBLFFBQUEsS0FDQUosRUFBQUssUUFBQUosR0FDQUQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJQUFBLFVBQUEsSUFFQVosRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsT0FDQVQsRUFBQU0sY0FBQUssVUFBQUUsT0FBQSxxQkFBQSxFQUVBLENBQUEsQ0FDQSxDQUVBLFNBQUFDLFdBQUFkLEVBQUFFLEVBQUFDLEdBQ0FILEVBQUFJLGlCQUFBLFFBQUEsS0FDQSxDQUFBLElBQUFKLEVBQUFLLE1BQUFVLFFBQUEsR0FBQSxHQUNBQyxRQUFBQyxJQUFBakIsRUFBQU0sY0FBQUEsYUFBQSxFQUNBTixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBSCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBRUEsQ0FBQSxDQUNBLENBRUEsU0FBQUssVUFBQWxCLEVBQUFtQixFQUFBakIsRUFBQUMsR0FDQWdCLEVBQUFmLGlCQUFBLFFBQUEsS0FDQVksUUFBQUMsSUFBQUUsRUFBQWQsTUFBQSxJQUFBTCxFQUFBSyxLQUFBLEVBQ0EsS0FBQWMsRUFBQWQsT0FDQWMsRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVUsRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQWdCLEVBQUFiLGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQVYsRUFBQVMsVUFBQUMsSUFBQSxVQUFBLEdBQ0FaLEVBQUFLLFFBQUFjLEVBQUFkLE9BQUFjLEVBQUFkLFFBQUFMLEVBQUFLLE9BQ0FjLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0FVLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLEdBQ0FnQixFQUFBYixjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBQ0FNLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLE9BQ0FVLEVBQUFiLGNBQUFLLFVBQUFFLE9BQUEscUJBQUEsRUFFQSxDQUFBLEVBQ0FiLEVBQUFJLGlCQUFBLFFBQUEsS0FDQVksUUFBQUMsSUFBQUUsRUFBQWQsTUFBQSxJQUFBTCxFQUFBSyxLQUFBLEVBQ0EsS0FBQUwsRUFBQUssT0FDQUwsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJQUFBLFVBQUEsR0FDQU8sRUFBQWQsUUFBQUwsRUFBQUssT0FBQUwsRUFBQUssUUFBQWMsRUFBQWQsT0FDQUwsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJ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a0QsRUFBQXhELGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0FxRCxFQUFBeEQsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FFQSxDQUFBLENBQ0EsQ0FJQSxDQUFBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHZhbGlkSW5wdXQgKGlucHV0LCByZXMsIHNlbGVjdG9yLCBlcnJvcnMpIHtcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSByZXMpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZEVtYWlsKGlucHV0LCBzZWxlY3RvciwgZXJyb3JzKSB7XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZS5pbmRleE9mKFwiQFwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KVxyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMV07XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhc3NWYWxpZCAoaW5wdXQsIGlucHV0Q29uZiwgc2VsZWN0b3IsIGVycm9ycykge1xyXG4gICAgaW5wdXRDb25mLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coaW5wdXRDb25mLnZhbHVlICsgJyAnICsgaW5wdXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChpbnB1dENvbmYudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQudmFsdWUgIT09IGlucHV0Q29uZi52YWx1ZSB8fCBpbnB1dENvbmYudmFsdWUgIT09IGlucHV0LnZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzNdO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhpbnB1dENvbmYudmFsdWUgKyAnICcgKyBpbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0Q29uZi52YWx1ZSAhPT0gaW5wdXQudmFsdWUgfHwgaW5wdXQudmFsdWUgIT09IGlucHV0Q29uZi52YWx1ZSkge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbM107XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRQaG9uZShpbnB1dCwgcmVzLCBzZWxlY3RvciwgZXJyb3JzKSB7XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gcmVzKSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1sxXTtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQudmFsdWUuc2VhcmNoKC9bMC05XS8pID09PSAtMSkge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1s0XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZENoZWNrYm94KGlucHV0LCByZXMsIHNlbGVjdG9yKSB7XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC5jaGVja2VkID09PSByZXMpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBjb25zdCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fYnVyZ2VyXCIpO1xyXG4gICAgY29uc3QgbWVudUl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlYWRlcl9fbWVudS1pdGVtXCIpO1xyXG4gICAgY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19tZW51XCIpO1xyXG4gICAgY29uc3QgY29va2llc0FsZXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWVzLWFsZXJ0XCIpO1xyXG4gICAgY29uc3QgY29va2llc0FsZXJ0Q2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZXMtYWxlcnRfX2J0blwiKTtcclxuICAgIGxldCBlcnJvcnMgPSBbJ9Cf0L7Qu9C1INC90LUg0LfQsNC/0L7Qu9C90LXQvdC+JywgXCLQktCS0JXQlNCY0KLQlSDQktCQ0KggRS1NQUlMINCSINCf0KDQkNCS0JjQm9Cs0J3QntCcINCk0J7QoNCc0JDQotCVLlwiLCBcItCd0LXQutC+0YDRgNC10LrRgtC90YvQuSDQmNCY0J1cIiwgXCLQn9Cw0YDQvtC70Lgg0LTQvtC70LbQvdGLINGB0L7QstC/0LDQtNCw0YLRjFwiLCBcItCd0LXQutC+0YDRgNC10LrRgtC90L7QtSDQt9C90LDRh9C10L3QuNC1XCJdO1xyXG5cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY2Vzc19fZm9ybVwiKSkge1xyXG4gICAgICAgIGNvbnN0IGFjY2VzRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNjZXNzX19mb3JtXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0QWxsID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKVxyXG4gICAgICAgIGNvbnN0IGlucHV0TmFtZSA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2NvbXBhbnlOYW1lJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRJaW4gPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdpaW4nXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dEVtYWlsID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nZW1haWwnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dFBob25lID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ncGhvbmUnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dFBhc3MgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdwYXNzd29yZCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0Q29uZmlybVBhc3MgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdjb25maXJtUGFzc3dvcmQnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dE9mZXJ0ID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nYWdyZWVPZmVydCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0UGVyc29uYWwgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCJhZ3JlZVBlcnNvbmFsXCJdJyk7XHJcbiAgICAgICAgY29uc3QgYnRuID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT0nc3VibWl0J11cIik7XHJcblxyXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgIHZhbGlkSW5wdXQoaW5wdXROYW1lLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkUGhvbmUoaW5wdXRJaW4sICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRFbWFpbChpbnB1dEVtYWlsLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRQaG9uZShpbnB1dFBob25lLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHBhc3NWYWxpZChpbnB1dFBhc3MsIGlucHV0Q29uZmlybVBhc3MsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZElucHV0KGlucHV0Q29uZmlybVBhc3MsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRDaGVja2JveChpbnB1dE9mZXJ0LCBmYWxzZSwgYnRuKTtcclxuICAgICAgICB2YWxpZENoZWNrYm94KGlucHV0UGVyc29uYWwsIGZhbHNlLCBidG4pO1xyXG5cclxuICAgICAgICBpbnB1dEFsbC5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0TmFtZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0SWluLnZhbHVlID09PSAnJyB8fCBpbnB1dElpbi52YWx1ZS5zZWFyY2goL1swLTldLykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlICBpZiAoaW5wdXRFbWFpbC52YWx1ZS5pbmRleE9mKFwiQFwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0UGhvbmUudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dFBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlICBpZiAoaW5wdXRDb25maXJtUGFzcy52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgIGlmIChpbnB1dE9mZXJ0LmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dFBlcnNvbmFsLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWNjZXNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dE5hbWUudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0TmFtZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0TmFtZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRJaW4udmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dElpbi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRJaW4ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dElpbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRFbWFpbC52YWx1ZS5pbmRleE9mKFwiQFwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFBob25lLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQaG9uZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQaG9uZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0UGhvbmUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0UGFzcy52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0UGFzcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBpZiAoaW5wdXRDb25maXJtUGFzcy52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0Q29uZmlybVBhc3MucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0Q29uZmlybVBhc3MucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dENvbmZpcm1QYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBpZiAoaW5wdXRPZmVydC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRPZmVydC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFBlcnNvbmFsLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBlcnNvbmFsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnF1ZXN0aW9uc19fZm9ybVwiKSkge1xyXG4gICAgICAgIGNvbnN0IHFGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2Zvcm1cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRzQWxsID0gcUZvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0TmFtZSA9IHFGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nY29tcGFueU5hbWUnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dEVtYWxpID0gcUZvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdlbWFpbCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0UGVyc29uYWwgPSBxRm9ybS5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cImFncmVlUGVyc29uYWxcIl0nKTtcclxuICAgICAgICBjb25zdCBpbnB1dE1lc3NhZ2UgPSBxRm9ybS5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cIm1lc3NhZ2VcIl0nKTtcclxuICAgICAgICBjb25zdCBidG4gPSBxRm9ybS5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9J3N1Ym1pdCddXCIpO1xyXG5cclxuICAgICAgICB2YWxpZElucHV0KGlucHV0TmFtZSwgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZEVtYWlsKGlucHV0RW1hbGksIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZElucHV0KGlucHV0TWVzc2FnZSwgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZENoZWNrYm94KGlucHV0UGVyc29uYWwsIGZhbHNlLCBidG4pO1xyXG5cclxuICAgICAgICBpbnB1dHNBbGwuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXROYW1lLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0RW1hbGkudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRQZXJzb25hbC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0TWVzc2FnZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXROYW1lLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0RW1hbGkudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dEVtYWxpLnZhbHVlLmluZGV4T2YoXCJAXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1sxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRQZXJzb25hbC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQZXJzb25hbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dE1lc3NhZ2UudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE1lc3NhZ2UucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0TWVzc2FnZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0TWVzc2FnZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIG1lbnVJdGVtLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKFwiY29va2llT25cIikgPCAwKSB7XHJcbiAgICAgICAgY29va2llc0FsZXJ0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29va2llc0FsZXJ0Q2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjb29raWVzQWxlcnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBcImNvb2tpZU9uPXRydWVcIjtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlY292ZXJ5XCIpKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVJlY292ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZWNvdmVyeVwiKTtcclxuICAgICAgICBjb25zdCBmb3JtUmVjb3ZlcnlFbWFpbCA9IGZvcm1SZWNvdmVyeS5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9J2VtYWlsJ11cIik7XHJcbiAgICAgICAgY29uc3QgZm9ybVJlY292ZXJ5QWdyZWUgPSBmb3JtUmVjb3ZlcnkucXVlcnlTZWxlY3RvcihcIltuYW1lPSdhZ3JlZVBlcnNvbmFsJ11cIik7XHJcbiAgICAgICAgY29uc3QgZm9ybVJlY292ZXJ5QnRuID0gZm9ybVJlY292ZXJ5LnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT0nc3VibWl0J1wiKTtcclxuXHJcbiAgICAgICAgZm9ybVJlY292ZXJ5QnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuXHJcblxyXG4gICAgICAgIHZhbGlkRW1haWwoZm9ybVJlY292ZXJ5RW1haWwsIGZvcm1SZWNvdmVyeUJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZENoZWNrYm94KGZvcm1SZWNvdmVyeUFncmVlLCBmb3JtUmVjb3ZlcnlCdG4sIGVycm9ycyk7XHJcblxyXG4gICAgICAgIGZvcm1SZWNvdmVyeS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybVJlY292ZXJ5RW1haWwudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlCdG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKGZvcm1SZWNvdmVyeUFncmVlLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlCdG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlCdG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgZm9ybVJlY292ZXJ5LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoZm9ybVJlY292ZXJ5RW1haWwudmFsdWUuaW5kZXhPZihcIkBcIikgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvcm1SZWNvdmVyeUFncmVlLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlBZ3JlZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlFbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucXVlc3Rpb25zX19mb3JtXCIpKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2Zvcm0tY2xlYXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2Zvcm1cIikucmVzZXQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvZ2luX19mb3JtXCIpKSB7XHJcbiAgICAgICAgY29uc3QgbG9naW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvZ2luX19mb3JtXCIpO1xyXG4gICAgICAgIGNvbnN0IGxvZ2luQWxsID0gbG9naW4ucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3JlcXVpcmVkXVwiKTtcclxuICAgICAgICBjb25zdCBsb2dpbkVtYWlsID0gbG9naW4ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdlbWFpbCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGxvZ2luUGFzcyA9IGxvZ2luLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgICAgICBjb25zdCBsb2dpblBlcnNvbmFsID0gbG9naW4ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdhZ3JlZVBlcnNvbmFsJ11cIik7XHJcbiAgICAgICAgY29uc3QgYnRuID0gbG9naW4ucXVlcnlTZWxlY3RvcihcIlt0eXBlPSdzdWJtaXQnXVwiKTtcclxuXHJcbiAgICAgICAgdmFsaWRFbWFpbChsb2dpbkVtYWlsLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRJbnB1dChsb2dpblBhc3MsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRDaGVja2JveChsb2dpblBlcnNvbmFsLCBidG4sIGVycm9ycyk7XHJcblxyXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgIGxvZ2luQWxsLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvZ2luUGFzcy52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxvZ2luUGVyc29uYWwudmFsdWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGxvZ2luUGFzcy52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luUGFzcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbG9naW5QYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgbG9naW5QYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsb2dpbkVtYWlsLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgbG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobG9naW5FbWFpbC52YWx1ZS5pbmRleE9mKFwiQFwiKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzFdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsb2dpblBlcnNvbmFsLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dpblBlcnNvbmFsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBsb2dpblBlcnNvbmFsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgbG9naW5QZXJzb25hbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1sxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn0pOyJdfQ==
