function validInput(e,t,n,r){e.addEventListener("input",()=>{e.value===t?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[0],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function validEmail(e,t,n){e.addEventListener("input",()=>{-1===e.value.indexOf("@")?(console.log(e.parentElement.parentElement),e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[1],e.parentElement.classList.add("form__input-invalid"),t.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function passValid(e,t,n,r){t.addEventListener("input",()=>{console.log(t.value+" "+e.value),""===t.value?(t.parentElement.parentElement.querySelector(".form__error").style.display="block",t.parentElement.parentElement.querySelector(".form__error").textContent=r[0],t.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):e.value!==t.value||t.value!==e.value?(t.parentElement.parentElement.querySelector(".form__error").style.display="block",t.parentElement.parentElement.querySelector(".form__error").textContent=r[3],t.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"),t.parentElement.parentElement.querySelector(".form__error").style.display="none",t.parentElement.classList.remove("form__input-invalid"))}),e.addEventListener("input",()=>{console.log(t.value+" "+e.value),""===e.value?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[0],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):t.value!==e.value||e.value!==t.value?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[3],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"),t.parentElement.parentElement.querySelector(".form__error").style.display="none",t.parentElement.classList.remove("form__input-invalid"))})}function validPhone(e,t,n,r){e.addEventListener("input",()=>{e.value===t?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[1],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):-1===e.value.search(/[0-9]/)?e.parentElement.parentElement.querySelector(".form__error").textContent=r[4]:(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function validCheckbox(e,t,n){e.addEventListener("input",()=>{e.checked===t?(e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):e.parentElement.classList.remove("form__input-invalid")})}document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".header__burger");var e=document.querySelectorAll(".header__menu-item");const n=document.querySelector(".header__menu"),r=document.querySelector(".cookies-alert");var l=document.querySelector(".cookies-alert__btn");let a=["Поле не заполнено","ВВЕДИТЕ ВАШ E-MAIL В ПРАВИЛЬНОМ ФОРМАТЕ.","Некорректный ИИН","Пароли должны совпадать","Некорректное значение"];if(document.querySelector(".access__form")){var i=document.querySelector(".access__form"),o=i.querySelectorAll("input");const s=i.querySelector("[name='companyName']"),m=i.querySelector("[name='iin']"),d=i.querySelector("[name='email']"),c=i.querySelector("[name='phone']"),p=i.querySelector("[name='password']"),u=i.querySelector("[name='confirmPassword']"),_=i.querySelector("[name='agreeOfert']"),E=i.querySelector('[name="agreePersonal"]'),v=i.querySelector("[type='submit']");v.classList.add("disabled"),validInput(s,"",v,a),validPhone(m,"",v,a),validEmail(d,v,a),validPhone(c,"",v,a),passValid(p,u,v,a),validInput(u,"",v,a),validCheckbox(_,!1,v),validCheckbox(E,!1,v),o.forEach(e=>{e.addEventListener("input",()=>{s.parentElement.classList.contains("form__input-invalid")||s.parentElement.classList.contains("form__input-invalid")||d.parentElement.classList.contains("form__input-invalid")||c.parentElement.classList.contains("form__input-invalid")||p.parentElement.classList.contains("form__input-invalid")||u.parentElement.classList.contains("form__input-invalid")||_.parentElement.classList.contains("form__input-invalid")||E.parentElement.classList.contains("form__input-invalid")?v.classList.add("disabled"):v.classList.remove("disabled")})}),i.addEventListener("submit",e=>{s.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),s.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),d.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),c.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),p.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),u.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),_.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),E.parentElement.classList.contains("form__input-invalid")&&e.preventDefault()}),v.addEventListener("click",()=>{""===s.value&&(s.parentElement.classList.add("form__input-invalid"),s.parentElement.parentElement.querySelector(".form__error").style.display="block",s.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===m.value&&(m.parentElement.classList.add("form__input-invalid"),m.parentElement.parentElement.querySelector(".form__error").style.display="block",m.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),-1===d.value.indexOf("@")&&(d.parentElement.classList.add("form__input-invalid"),d.parentElement.parentElement.querySelector(".form__error").style.display="block",d.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===c.value&&(c.parentElement.classList.add("form__input-invalid"),c.parentElement.parentElement.querySelector(".form__error").style.display="block",c.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===p.value&&(p.parentElement.classList.add("form__input-invalid"),p.parentElement.parentElement.querySelector(".form__error").style.display="block",p.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===u.value&&(u.parentElement.classList.add("form__input-invalid"),u.parentElement.parentElement.querySelector(".form__error").style.display="block",u.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),!1===_.checked&&_.parentElement.classList.add("form__input-invalid"),!1===E.checked&&E.parentElement.classList.add("form__input-invalid")})}if(document.querySelector(".questions__form")){o=document.querySelector(".questions__form"),i=o.querySelectorAll("input");const y=o.querySelector("[name='companyName']"),f=o.querySelector("[name='email']"),L=o.querySelector('[name="agreePersonal"]'),q=o.querySelector('[name="message"]'),S=o.querySelector("[type='submit']");validInput(y,"",S,a),validEmail(f,S,a),validInput(q,"",S,a),validCheckbox(L,!1,S),i.forEach(e=>{e.addEventListener("input",()=>{y.parentElement.classList.contains("form__input-invalid")||f.parentElement.classList.contains("form__input-invalid")||L.parentElement.classList.contains("form__input-invalid")||q.parentElement.classList.contains("form__input-invalid")?S.classList.add("disabled"):S.classList.remove("disabled")})}),S.classList.add("disabled"),S.addEventListener("click",()=>{""===y.value&&(y.parentElement.classList.add("form__input-invalid"),y.parentElement.parentElement.querySelector(".form__error").style.display="block",y.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===f.value?(f.parentElement.classList.add("form__input-invalid"),f.parentElement.parentElement.querySelector(".form__error").style.display="block",f.parentElement.parentElement.querySelector(".form__error").textContent=a[0]):-1===f.value.indexOf("@")&&(f.parentElement.classList.add("form__input-invalid"),f.parentElement.parentElement.querySelector(".form__error").style.display="block",f.parentElement.parentElement.querySelector(".form__error").textContent=a[1]),!1===L.checked&&L.parentElement.classList.add("form__input-invalid"),""===q.value&&(q.parentElement.classList.add("form__input-invalid"),q.parentElement.parentElement.querySelector(".form__error").style.display="block",q.parentElement.parentElement.querySelector(".form__error").textContent=a[0])})}if(t.addEventListener("click",()=>{t.classList.toggle("active"),n.classList.toggle("active")}),e.forEach(e=>{e.addEventListener("click",()=>{t.classList.toggle("active"),n.classList.toggle("active")})}),document.cookie.indexOf("cookieOn")<0&&r.classList.add("active"),l.addEventListener("click",()=>{r.classList.remove("active"),document.cookie="cookieOn=true"}),document.querySelector(".recovery")){o=document.querySelector(".recovery");const b=o.querySelector("[type='email']"),k=o.querySelector("[name='agreePersonal']"),x=o.querySelector("[type='submit'");x.classList.add("disabled"),validEmail(b,x,a),validCheckbox(k,x,a),o.querySelectorAll("input").forEach(e=>{e.addEventListener("input",()=>{-1===b.value.indexOf("@")||!1===k.checked?(b.parentElement.classList.add("form__input-invalid"),x.classList.add("disabled")):x.classList.remove("disabled")})}),o.addEventListener("submit",e=>{e.preventDefault(),b.value.indexOf("@")<=0?(b.parentElement.classList.add("form__input-invalid"),b.parentElement.parentElement.querySelector(".form__error").style.display="block",b.parentElement.parentElement.querySelector(".form__error").textContent=a[1]):b.parentElement.classList.remove("form__input-invalid"),!1===k.checked?k.parentElement.classList.add("form__input-invalid"):b.parentElement.classList.remove("form__input-invalid")})}if(document.querySelector(".questions__form")&&document.querySelector(".questions__form-clear").addEventListener("click",()=>{document.querySelector(".questions__form").reset()}),document.querySelector(".login__form")){i=document.querySelector(".login__form"),e=i.querySelectorAll("input[required]");const C=i.querySelector("[name='email']"),h=i.querySelector("[name='password']"),g=i.querySelector("[name='agreePersonal']"),O=i.querySelector("[type='submit']");validEmail(C,O,a),validInput(h,"",O,a),validCheckbox(g,O,a),O.classList.add("disabled"),e.forEach(e=>{e.addEventListener("input",()=>{""===h.value||C.parentElement.classList.contains("form__input-invalid")||!1===g.value?O.classList.add("disabled"):O.classList.remove("disabled")})}),O.addEventListener("click",()=>{""===h.value&&(h.parentElement.classList.add("form__input-invalid"),h.parentElement.parentElement.querySelector(".form__error").style.display="block",h.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===C.value?(C.parentElement.classList.add("form__input-invalid"),C.parentElement.parentElement.querySelector(".form__error").style.display="block",C.parentElement.parentElement.querySelector(".form__error").textContent=a[0]):-1===C.value.indexOf("@")&&(C.parentElement.classList.add("form__input-invalid"),C.parentElement.parentElement.querySelector(".form__error").style.display="block",C.parentElement.parentElement.querySelector(".form__error").textContent=a[1]),!1===g.checked&&g.parentElement.classList.add("form__input-invalid")})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInZhbGlkSW5wdXQiLCJpbnB1dCIsInJlcyIsInNlbGVjdG9yIiwiZXJyb3JzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwicGFyZW50RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZhbGlkRW1haWwiLCJpbmRleE9mIiwiY29uc29sZSIsImxvZyIsInBhc3NWYWxpZCIsImlucHV0Q29uZiIsInZhbGlkUGhvbmUiLCJzZWFyY2giLCJ2YWxpZENoZWNrYm94IiwiY2hlY2tlZCIsImRvY3VtZW50IiwiYnVyZ2VyIiwibWVudUl0ZW0iLCJxdWVyeVNlbGVjdG9yQWxsIiwibWVudSIsImNvb2tpZXNBbGVydCIsImNvb2tpZXNBbGVydENsb3NlIiwibGV0IiwiYWNjZXNGb3JtIiwiaW5wdXRBbGwiLCJpbnB1dE5hbWUiLCJpbnB1dElpbiIsImlucHV0RW1haWwiLCJpbnB1dFBob25lIiwiaW5wdXRQYXNzIiwiaW5wdXRDb25maXJtUGFzcyIsImlucHV0T2ZlcnQiLCJpbnB1dFBlcnNvbmFsIiwiYnRuIiwiZm9yRWFjaCIsImVsIiwiY29udGFpbnMiLCJlIiwicHJldmVudERlZmF1bHQiLCJxRm9ybSIsImlucHV0c0FsbCIsImlucHV0RW1hbGkiLCJpbnB1dE1lc3NhZ2UiLCJ0b2dnbGUiLCJjb29raWUiLCJmb3JtUmVjb3ZlcnkiLCJmb3JtUmVjb3ZlcnlFbWFpbCIsImZvcm1SZWNvdmVyeUFncmVlIiwiZm9ybVJlY292ZXJ5QnRuIiwicmVzZXQiLCJsb2dpbiIsImxvZ2luQWxsIiwibG9naW5FbWFpbCIsImxvZ2luUGFzcyIsImxvZ2luUGVyc29uYWwiXSwibWFwcGluZ3MiOiJBQUFBLFNBQUFBLFdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FILEVBQUFJLGlCQUFBLFFBQUEsS0FDQUosRUFBQUssUUFBQUosR0FDQUQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJQUFBLFVBQUEsSUFFQVosRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsT0FDQVQsRUFBQU0sY0FBQUssVUFBQUUsT0FBQSxxQkFBQSxFQUVBLENBQUEsQ0FDQSxDQUVBLFNBQUFDLFdBQUFkLEVBQUFFLEVBQUFDLEdBQ0FILEVBQUFJLGlCQUFBLFFBQUEsS0FDQSxDQUFBLElBQUFKLEVBQUFLLE1BQUFVLFFBQUEsR0FBQSxHQUNBQyxRQUFBQyxJQUFBakIsRUFBQU0sY0FBQUEsYUFBQSxFQUNBTixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBSCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBRUEsQ0FBQSxDQUNBLENBRUEsU0FBQUssVUFBQWxCLEVBQUFtQixFQUFBakIsRUFBQUMsR0FDQWdCLEVBQUFmLGlCQUFBLFFBQUEsS0FDQVksUUFBQUMsSUFBQUUsRUFBQWQsTUFBQSxJQUFBTCxFQUFBSyxLQUFBLEVBQ0EsS0FBQWMsRUFBQWQsT0FDQWMsRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVUsRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQWdCLEVBQUFiLGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQVYsRUFBQVMsVUFBQUMsSUFBQSxVQUFBLEdBQ0FaLEVBQUFLLFFBQUFjLEVBQUFkLE9BQUFjLEVBQUFkLFFBQUFMLEVBQUFLLE9BQ0FjLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0FVLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLEdBQ0FnQixFQUFBYixjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBQ0FNLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLE9BQ0FVLEVBQUFiLGNBQUFLLFVBQUFFLE9BQUEscUJBQUEsRUFFQSxDQUFBLEVBQ0FiLEVBQUFJLGlCQUFBLFFBQUEsS0FDQVksUUFBQUMsSUFBQUUsRUFBQWQsTUFBQSxJQUFBTCxFQUFBSyxLQUFBLEVBQ0EsS0FBQUwsRUFBQUssT0FDQUwsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJQUFBLFVBQUEsR0FDQU8sRUFBQWQsUUFBQUwsRUFBQUssT0FBQUwsRUFBQUssUUFBQWMsRUFBQWQsT0FDQUwsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVQsRUFBQU0sY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQUgsRUFBQU0sY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJ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QUEsS0FDQSxLQUFBMEQsRUFBQXpELFFBQ0F5RCxFQUFBeEQsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBa0QsRUFBQXhELGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0FxRCxFQUFBeEQsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFFQSxLQUFBMEQsRUFBQXhELE9BQ0F3RCxFQUFBdkQsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBaUQsRUFBQXZELGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0FvRCxFQUFBdkQsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFDQSxDQUFBLElBQUEwRCxFQUFBeEQsTUFBQVUsUUFBQSxHQUFBLElBQ0E4QyxFQUFBdkQsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBaUQsRUFBQXZELGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0FvRCxFQUFBdkQsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFJQSxDQUFBLElBQUE0RCxFQUFBeEMsU0FDQXdDLEVBQUF6RCxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLENBRUEsQ0FBQSxDQUNBLENBSUEsQ0FBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB2YWxpZElucHV0IChpbnB1dCwgcmVzLCBzZWxlY3RvciwgZXJyb3JzKSB7XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gcmVzKSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRFbWFpbChpbnB1dCwgc2VsZWN0b3IsIGVycm9ycykge1xyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaW5wdXQudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudClcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzFdO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYXNzVmFsaWQgKGlucHV0LCBpbnB1dENvbmYsIHNlbGVjdG9yLCBlcnJvcnMpIHtcclxuICAgIGlucHV0Q29uZi5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlucHV0Q29uZi52YWx1ZSArICcgJyArIGlucHV0LnZhbHVlKTtcclxuICAgICAgICBpZiAoaW5wdXRDb25mLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnZhbHVlICE9PSBpbnB1dENvbmYudmFsdWUgfHwgaW5wdXRDb25mLnZhbHVlICE9PSBpbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1szXTtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coaW5wdXRDb25mLnZhbHVlICsgJyAnICsgaW5wdXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dENvbmYudmFsdWUgIT09IGlucHV0LnZhbHVlIHx8IGlucHV0LnZhbHVlICE9PSBpbnB1dENvbmYudmFsdWUpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzNdO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkUGhvbmUoaW5wdXQsIHJlcywgc2VsZWN0b3IsIGVycm9ycykge1xyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09IHJlcykge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMV07XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnZhbHVlLnNlYXJjaCgvWzAtOV0vKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbNF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRDaGVja2JveChpbnB1dCwgcmVzLCBzZWxlY3Rvcikge1xyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCA9PT0gcmVzKSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2J1cmdlclwiKTtcclxuICAgIGNvbnN0IG1lbnVJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXJfX21lbnUtaXRlbVwiKTtcclxuICAgIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbWVudVwiKTtcclxuICAgIGNvbnN0IGNvb2tpZXNBbGVydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llcy1hbGVydFwiKTtcclxuICAgIGNvbnN0IGNvb2tpZXNBbGVydENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWVzLWFsZXJ0X19idG5cIik7XHJcbiAgICBsZXQgZXJyb3JzID0gWyfQn9C+0LvQtSDQvdC1INC30LDQv9C+0LvQvdC10L3QvicsIFwi0JLQktCV0JTQmNCi0JUg0JLQkNCoIEUtTUFJTCDQkiDQn9Cg0JDQktCY0JvQrNCd0J7QnCDQpNCe0KDQnNCQ0KLQlS5cIiwgXCLQndC10LrQvtGA0YDQtdC60YLQvdGL0Lkg0JjQmNCdXCIsIFwi0J/QsNGA0L7Qu9C4INC00L7Qu9C20L3RiyDRgdC+0LLQv9Cw0LTQsNGC0YxcIiwgXCLQndC10LrQvtGA0YDQtdC60YLQvdC+0LUg0LfQvdCw0YfQtdC90LjQtVwiXTtcclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2Nlc3NfX2Zvcm1cIikpIHtcclxuICAgICAgICBjb25zdCBhY2Nlc0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY2Vzc19fZm9ybVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dEFsbCA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIilcclxuICAgICAgICBjb25zdCBpbnB1dE5hbWUgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdjb21wYW55TmFtZSddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0SWluID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0naWluJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRFbWFpbCA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2VtYWlsJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRQaG9uZSA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3Bob25lJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRQYXNzID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dENvbmZpcm1QYXNzID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nY29uZmlybVBhc3N3b3JkJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRPZmVydCA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2FncmVlT2ZlcnQnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dFBlcnNvbmFsID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiYWdyZWVQZXJzb25hbFwiXScpO1xyXG4gICAgICAgIGNvbnN0IGJ0biA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9J3N1Ym1pdCddXCIpO1xyXG5cclxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG5cclxuICAgICAgICB2YWxpZElucHV0KGlucHV0TmFtZSwgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZFBob25lKGlucHV0SWluLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkRW1haWwoaW5wdXRFbWFpbCwgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkUGhvbmUoaW5wdXRQaG9uZSwgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICBwYXNzVmFsaWQoaW5wdXRQYXNzLCBpbnB1dENvbmZpcm1QYXNzLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRJbnB1dChpbnB1dENvbmZpcm1QYXNzLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkQ2hlY2tib3goaW5wdXRPZmVydCwgZmFsc2UsIGJ0bik7XHJcbiAgICAgICAgdmFsaWRDaGVja2JveChpbnB1dFBlcnNvbmFsLCBmYWxzZSwgYnRuKTtcclxuXHJcbiAgICAgICAgaW5wdXRBbGwuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dE5hbWUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dE5hbWUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dEVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRQaG9uZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0UGFzcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0Q29uZmlybVBhc3MucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dE9mZXJ0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRQZXJzb25hbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhY2Nlc0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXROYW1lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dE5hbWUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0UGhvbmUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0UGFzcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRDb25maXJtUGFzcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRPZmVydC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRQZXJzb25hbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXROYW1lLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0SWluLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRJaW4ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0SWluLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRJaW4ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0RW1haWwudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRQaG9uZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0UGhvbmUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0UGhvbmUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBob25lLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBhc3MucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0UGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0UGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgaWYgKGlucHV0Q29uZmlybVBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dENvbmZpcm1QYXNzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dENvbmZpcm1QYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRDb25maXJtUGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgaWYgKGlucHV0T2ZlcnQuY2hlY2tlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0T2ZlcnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRQZXJzb25hbC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQZXJzb25hbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2Zvcm1cIikpIHtcclxuICAgICAgICBjb25zdCBxRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucXVlc3Rpb25zX19mb3JtXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0c0FsbCA9IHFGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dE5hbWUgPSBxRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2NvbXBhbnlOYW1lJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRFbWFsaSA9IHFGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nZW1haWwnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dFBlcnNvbmFsID0gcUZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCJhZ3JlZVBlcnNvbmFsXCJdJyk7XHJcbiAgICAgICAgY29uc3QgaW5wdXRNZXNzYWdlID0gcUZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCJtZXNzYWdlXCJdJyk7XHJcbiAgICAgICAgY29uc3QgYnRuID0gcUZvcm0ucXVlcnlTZWxlY3RvcihcIlt0eXBlPSdzdWJtaXQnXVwiKTtcclxuXHJcbiAgICAgICAgdmFsaWRJbnB1dChpbnB1dE5hbWUsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRFbWFpbChpbnB1dEVtYWxpLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRJbnB1dChpbnB1dE1lc3NhZ2UsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRDaGVja2JveChpbnB1dFBlcnNvbmFsLCBmYWxzZSwgYnRuKTtcclxuXHJcbiAgICAgICAgaW5wdXRzQWxsLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0TmFtZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0UGVyc29uYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRNZXNzYWdlLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuXHJcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dE5hbWUudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0TmFtZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0TmFtZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRFbWFsaS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1hbGkucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1hbGkucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0RW1hbGkudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1sxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRQZXJzb25hbC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQZXJzb25hbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dE1lc3NhZ2UudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE1lc3NhZ2UucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlucHV0TWVzc2FnZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0TWVzc2FnZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIG1lbnVJdGVtLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKFwiY29va2llT25cIikgPCAwKSB7XHJcbiAgICAgICAgY29va2llc0FsZXJ0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29va2llc0FsZXJ0Q2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjb29raWVzQWxlcnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBcImNvb2tpZU9uPXRydWVcIjtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlY292ZXJ5XCIpKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVJlY292ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZWNvdmVyeVwiKTtcclxuICAgICAgICBjb25zdCBmb3JtUmVjb3ZlcnlFbWFpbCA9IGZvcm1SZWNvdmVyeS5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9J2VtYWlsJ11cIik7XHJcbiAgICAgICAgY29uc3QgZm9ybVJlY292ZXJ5QWdyZWUgPSBmb3JtUmVjb3ZlcnkucXVlcnlTZWxlY3RvcihcIltuYW1lPSdhZ3JlZVBlcnNvbmFsJ11cIik7XHJcbiAgICAgICAgY29uc3QgZm9ybVJlY292ZXJ5QnRuID0gZm9ybVJlY292ZXJ5LnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT0nc3VibWl0J1wiKTtcclxuXHJcbiAgICAgICAgZm9ybVJlY292ZXJ5QnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuXHJcblxyXG4gICAgICAgIHZhbGlkRW1haWwoZm9ybVJlY292ZXJ5RW1haWwsIGZvcm1SZWNvdmVyeUJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZENoZWNrYm94KGZvcm1SZWNvdmVyeUFncmVlLCBmb3JtUmVjb3ZlcnlCdG4sIGVycm9ycyk7XHJcblxyXG4gICAgICAgIGZvcm1SZWNvdmVyeS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybVJlY292ZXJ5RW1haWwudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlCdG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKGZvcm1SZWNvdmVyeUFncmVlLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlCdG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlCdG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgZm9ybVJlY292ZXJ5LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoZm9ybVJlY292ZXJ5RW1haWwudmFsdWUuaW5kZXhPZihcIkBcIikgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvcm1SZWNvdmVyeUFncmVlLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlBZ3JlZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlFbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucXVlc3Rpb25zX19mb3JtXCIpKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2Zvcm0tY2xlYXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2Zvcm1cIikucmVzZXQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvZ2luX19mb3JtXCIpKSB7XHJcbiAgICAgICAgY29uc3QgbG9naW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvZ2luX19mb3JtXCIpO1xyXG4gICAgICAgIGNvbnN0IGxvZ2luQWxsID0gbG9naW4ucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3JlcXVpcmVkXVwiKTtcclxuICAgICAgICBjb25zdCBsb2dpbkVtYWlsID0gbG9naW4ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdlbWFpbCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGxvZ2luUGFzcyA9IGxvZ2luLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgICAgICBjb25zdCBsb2dpblBlcnNvbmFsID0gbG9naW4ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdhZ3JlZVBlcnNvbmFsJ11cIik7XHJcbiAgICAgICAgY29uc3QgYnRuID0gbG9naW4ucXVlcnlTZWxlY3RvcihcIlt0eXBlPSdzdWJtaXQnXVwiKTtcclxuXHJcbiAgICAgICAgdmFsaWRFbWFpbChsb2dpbkVtYWlsLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRJbnB1dChsb2dpblBhc3MsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRDaGVja2JveChsb2dpblBlcnNvbmFsLCBidG4sIGVycm9ycyk7XHJcblxyXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgIGxvZ2luQWxsLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvZ2luUGFzcy52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxvZ2luUGVyc29uYWwudmFsdWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGxvZ2luUGFzcy52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luUGFzcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbG9naW5QYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgbG9naW5QYXNzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsb2dpbkVtYWlsLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgbG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobG9naW5FbWFpbC52YWx1ZS5pbmRleE9mKFwiQFwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzFdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsb2dpblBlcnNvbmFsLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dpblBlcnNvbmFsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG59KTsiXX0=
